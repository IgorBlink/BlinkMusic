# Быстрый старт BlinkMusic Backend

Это руководство поможет вам быстро настроить и запустить BlinkMusic Backend с интеграцией Last.fm и AudioDB.

## Шаг 1: Установка зависимостей

```bash
npm install
```

## Шаг 2: Настройка переменных окружения

Создайте файл `.env` в корне проекта:

```bash
cp .env.example .env
```

Отредактируйте файл `.env` с вашими данными:
- Настройте подключение к MongoDB
- Добавьте ваш ключ API Last.fm (получите на https://www.last.fm/api/account/create)
- AudioDB API по умолчанию использует бесплатный ключ "2"

## Шаг 3: Запуск сервера

Запустите сервер в режиме разработки:

```bash
npm run dev
```

Сервер будет доступен по адресу: http://localhost:5000

## Шаг 4: Тестирование API

### Тестирование музыкальных API

Запустите встроенный тест Last.fm и AudioDB интеграции:

```bash
npm run test:music
```

### Проверка поиска треков

```bash
curl "http://localhost:5000/api/tracks/search?query=Nirvana&limit=5"
```

### Получение треков по жанру

```bash
curl "http://localhost:5000/api/tracks/genre/rock?limit=5"
```

### Получение трека по ID (после поиска)

```bash
curl "http://localhost:5000/api/tracks/[ID]"
```

## Особенности работы

- При первом поиске треки сохраняются в локальную базу данных
- При получении трека по ID он дополнительно обогащается метаданными из AudioDB
- Поиск всегда объединяет локальные результаты и результаты из Last.fm

## Решение проблем

### API ключи не распознаются

Проверьте файл `.env` и убедитесь, что он содержит следующие строки:
```
LASTFM_API_KEY=ваш_ключ_last_fm
AUDIODB_API_KEY=2
```

### Невозможно подключиться к MongoDB

Проверьте строку подключения `MONGODB_URI` в файле `.env`. 