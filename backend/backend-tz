# BlinkMusic API - Описание эндпоинтов и функционала

## Авторизация и пользователи
node.js express+ts mongodb
### Регистрация и авторизация
- `POST /api/auth/register` - Регистрация нового пользователя
- `POST /api/auth/login` - Авторизация пользователя
- `POST /api/auth/refresh` - Обновление токена доступа
- `POST /api/auth/logout` - Выход из системы
- `GET /api/auth/me` - Получение данных текущего пользователя

### Пользователи
- `GET /api/users/:id` - Получение профиля пользователя
- `PUT /api/users/:id` - Обновление профиля пользователя
- `GET /api/users/:id/playlists` - Получение плейлистов пользователя
- `GET /api/users/:id/favorites` - Получение избранных треков пользователя

## Треки и музыка

### Треки
- `GET /api/tracks` - Получение списка треков с пагинацией
- `GET /api/tracks/:id` - Получение информации о треке
- `GET /api/tracks/:id/stream` - Потоковая передача аудио файла
- `GET /api/tracks/:id/download` - Скачивание аудио файла (при необходимости)
- `GET /api/tracks/search` - Поиск треков по названию, исполнителю, альбому
- `GET /api/tracks/recommended` - Получение рекомендованных треков
- `GET /api/tracks/trending` - Получение трендовых треков

### Лирика и аннотации
- `GET /api/tracks/:id/lyrics` - Получение текста песни
- `GET /api/tracks/:id/lyrics/line/:lineId/annotation` - Получение аннотации для строки
- `POST /api/tracks/:id/lyrics/line/:lineId/annotation` - Создание/сохранение аннотации

### Альбомы
- `GET /api/albums` - Получение списка альбомов с пагинацией
- `GET /api/albums/:id` - Получение информации об альбоме
- `GET /api/albums/:id/tracks` - Получение списка треков альбома
- `GET /api/albums/search` - Поиск альбомов по названию, исполнителю

### Исполнители
- `GET /api/artists` - Получение списка исполнителей с пагинацией
- `GET /api/artists/:id` - Получение информации об исполнителе
- `GET /api/artists/:id/tracks` - Получение треков исполнителя
- `GET /api/artists/:id/albums` - Получение альбомов исполнителя
- `GET /api/artists/search` - Поиск исполнителей по имени

## Плейлисты и коллекции

### Плейлисты
- `GET /api/playlists` - Получение публичных плейлистов
- `GET /api/playlists/:id` - Получение информации о плейлисте
- `POST /api/playlists` - Создание нового плейлиста
- `PUT /api/playlists/:id` - Обновление плейлиста
- `DELETE /api/playlists/:id` - Удаление плейлиста
- `GET /api/playlists/:id/tracks` - Получение треков в плейлисте
- `POST /api/playlists/:id/tracks` - Добавление трека в плейлист
- `DELETE /api/playlists/:id/tracks/:trackId` - Удаление трека из плейлиста

### Избранное
- `GET /api/favorites` - Получение избранных треков пользователя
- `POST /api/favorites/:trackId` - Добавление трека в избранное
- `DELETE /api/favorites/:trackId` - Удаление трека из избранного

## Пользовательские настройки

### Настройки
- `GET /api/settings` - Получение настроек пользователя
- `PUT /api/settings` - Обновление настроек пользователя

### Настройки волны (визуализация)
- `GET /api/wave-settings` - Получение настроек визуализации волны
- `PUT /api/wave-settings` - Обновление настроек визуализации волны

## История прослушивания и статистика

### История
- `GET /api/history` - Получение истории прослушивания
- `POST /api/history/:trackId` - Добавление записи в историю прослушивания
- `DELETE /api/history/:id` - Удаление записи из истории прослушивания

### Статистика
- `GET /api/stats/most-played` - Получение наиболее прослушиваемых треков
- `GET /api/stats/listening-time` - Получение статистики по времени прослушивания

## Медиафайлы

### Загрузка файлов
- `POST /api/upload/cover` - Загрузка обложки (для плейлистов, профиля)

## Функциональные возможности

### Авторизация
- Регистрация новых пользователей
- Аутентификация с помощью JWT
- Хранение и обновление токенов
- Защита маршрутов с помощью middleware
- Восстановление пароля

### Треки и воспроизведение
- Потоковая передача аудио
- Синхронизация прогресса воспроизведения между устройствами
- Кэширование популярных треков
- Обработка и преобразование форматов аудио
- Управление метаданными треков
- Предзагрузка и буферизация

### Тексты песен и аннотации
- Хранение синхронизированных текстов песен
- Интеграция с AI для генерации аннотаций
- Кэширование аннотаций
- Возможность редактирования аннотаций администраторами

### Поиск и фильтрация
- Полнотекстовый поиск по трекам, альбомам, исполнителям
- Фильтрация по жанрам, популярности, дате выпуска
- Сортировка результатов

### Рекомендации
- Персонализированные рекомендации на основе истории прослушивания
- Рекомендации по схожим исполнителям
- Трендовые треки и новые релизы

### Плейлисты и коллекции
- Создание, редактирование, удаление плейлистов
- Совместное использование плейлистов
- Автоматическое создание плейлистов на основе предпочтений

### Визуализация (Волна)
- Настройка параметров визуализации
- Анализ аудио для создания визуальных эффектов
- Сохранение и загрузка настроек визуализации

### Социальные функции
- Подписка на исполнителей
- Оценка треков
- Комментирование треков и плейлистов
- Обмен треками с другими пользователями

### Администрирование
- Управление пользователями
- Модерация контента
- Добавление и редактирование музыкального контента
- Аналитика использования платформы

### Интеграции
- Интеграция с внешними музыкальными API
- Экспорт/импорт плейлистов из других сервисов 